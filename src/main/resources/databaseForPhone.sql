-- MySQL Script generated by MySQL Workbench
-- Thu Jan 12 14:29:28 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `mydb` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`PHONE_DETAILS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`PHONE_DETAILS` ;

CREATE TABLE IF NOT EXISTS `mydb`.`PHONE_DETAILS` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `COLOR` VARCHAR(20) NOT NULL,
  `BATTERY` INT NOT NULL,
  `PRICE` DECIMAL(10,2) NOT NULL,
  `PHONE_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SERVICE_CENTERS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`SERVICE_CENTERS` ;

CREATE TABLE IF NOT EXISTS `mydb`.`SERVICE_CENTERS` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL,
  `PHONE` VARCHAR(45) NOT NULL,
  `EMAIL` VARCHAR(45) NOT NULL,
  `ADDRESS` VARCHAR(45) NOT NULL,
  `OPEN_HOURS` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SERVICE_REQUESTS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`SERVICE_REQUESTS` ;

CREATE TABLE IF NOT EXISTS `mydb`.`SERVICE_REQUESTS` (
  `id` INT NOT NULL,
  `CUSTOMER_id` INT NOT NULL,
  `PHONE_id` INT NOT NULL,
  `REQUESTED_SERVICE` VARCHAR(45) NOT NULL,
  `SERVICE_CENTERS_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) ,
  INDEX `fk_service_requests_service_centers1_idx` (`SERVICE_CENTERS_id` ASC) ,
  CONSTRAINT `fk_service_requests_service_centers1`
    FOREIGN KEY (`SERVICE_CENTERS_id`)
    REFERENCES `mydb`.`SERVICE_CENTERS` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CUSTOMERS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`CUSTOMERS` ;

CREATE TABLE IF NOT EXISTS `mydb`.`CUSTOMERS` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `FIRST_NAME` VARCHAR(50) NOT NULL,
  `LAST_NAME` VARCHAR(50) NOT NULL,
  `EMAIL` VARCHAR(50) NOT NULL,
  `PHONE` VARCHAR(50) NOT NULL,
  `ADDRESS` VARCHAR(50) NOT NULL,
  `SERVICE_REQUEST_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) ,
  INDEX `fk_customers_service_requests1_idx` (`SERVICE_REQUEST_id` ASC) ,
  CONSTRAINT `fk_customers_service_requests1`
    FOREIGN KEY (`SERVICE_REQUEST_id`)
    REFERENCES `mydb`.`SERVICE_REQUESTS` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`WARRANTIES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`WARRANTIES` ;

CREATE TABLE IF NOT EXISTS `mydb`.`WARRANTIES` (
  `id` INT NOT NULL,
  `PHONE_id` INT NULL,
  `START_DATE` DATETIME NOT NULL,
  `END_DATE` DATETIME NOT NULL,
  `WARRANTIES` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PHONES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`PHONES` ;

CREATE TABLE IF NOT EXISTS `mydb`.`PHONES` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `BRAND` VARCHAR(45) NOT NULL,
  `MODEL` VARCHAR(45) NOT NULL,
  `RELEASE_DATE` DATETIME NOT NULL,
  `PHONE_DETAIL` INT NOT NULL,
  `CUSTOMER_id` INT NOT NULL,
  `WARRANTIES_id` INT NOT NULL,
  `SERVICE_REQUESTS_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) ,
  INDEX `fk_phones_phone_details_idx` (`PHONE_DETAIL` ASC) ,
  INDEX `fk_phones_customers1_idx` (`CUSTOMER_id` ASC) ,
  INDEX `fk_phones_warranties1_idx` (`WARRANTIES_id` ASC) ,
  INDEX `fk_phones_service_requests1_idx` (`SERVICE_REQUESTS_id` ASC) ,
  CONSTRAINT `fk_phones_phone_details`
    FOREIGN KEY (`PHONE_DETAIL`)
    REFERENCES `mydb`.`PHONE_DETAILS` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_phones_customers1`
    FOREIGN KEY (`CUSTOMER_id`)
    REFERENCES `mydb`.`CUSTOMERS` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_phones_warranties1`
    FOREIGN KEY (`WARRANTIES_id`)
    REFERENCES `mydb`.`WARRANTIES` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_phones_service_requests1`
    FOREIGN KEY (`SERVICE_REQUESTS_id`)
    REFERENCES `mydb`.`SERVICE_REQUESTS` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SHOP`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`SHOP` ;

CREATE TABLE IF NOT EXISTS `mydb`.`SHOP` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL,
  `PHONE` VARCHAR(45) NOT NULL,
  `EMAIL` VARCHAR(45) NOT NULL,
  `ADDRESS` VARCHAR(45) NOT NULL,
  `OPEN_HOURS` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PURCHASES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`PURCHASES` ;

CREATE TABLE IF NOT EXISTS `mydb`.`PURCHASES` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `CUSTOMER_id` INT NOT NULL,
  `PHONE_id` INT NOT NULL,
  `PURCHASE_DATE` DATETIME NOT NULL,
  `PURCHASE_PRICE` DECIMAL(2) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`INVENTORY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`INVENTORY` ;

CREATE TABLE IF NOT EXISTS `mydb`.`INVENTORY` (
  `id` INT NOT NULL,
  `SHOP_id` INT NOT NULL,
  `PHONE_id` INT NOT NULL,
  `QUANTITY` INT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SERVICE_HISTORY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`SERVICE_HISTORY` ;

CREATE TABLE IF NOT EXISTS `mydb`.`SERVICE_HISTORY` (
  `id` INT NOT NULL,
  `PHONE_id` INT NOT NULL,
  `SERVICE_CENTER_id` INT NOT NULL,
  `SERVICE_TYPE` VARCHAR(45) NOT NULL,
  `CUSTOMER_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) VISIBLE,
  INDEX `fk_service_history_customers1_idx` (`CUSTOMER_id` ASC) ,
  CONSTRAINT `fk_service_history_customers1`
    FOREIGN KEY (`CUSTOMER_id`)
    REFERENCES `mydb`.`CUSTOMERS` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DELIVERIES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`DELIVERIES` ;

CREATE TABLE IF NOT EXISTS `mydb`.`DELIVERIES` (
  `id` INT NOT NULL,
  `SHOP_id` INT NOT NULL,
  `CUSTOMER_id` INT NOT NULL,
  `PHONE_id` INT NOT NULL,
  `DELIVERY_ADDRESS` VARCHAR(45) NOT NULL,
  `OWNER_NAME` VARCHAR(45) NOT NULL,
  `MOBILE_NUMBER` VARCHAR(45) NOT NULL,
  `DELIVERY_STATUS` TINYINT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`RETURN`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`RETURN` ;

CREATE TABLE IF NOT EXISTS `mydb`.`RETURN` (
  `id` INT NOT NULL,
  `CUSTOMER_id` INT NOT NULL,
  `CUSTOMER_MOBILE` VARCHAR(45) NOT NULL,
  `PHONE_id` VARCHAR(45) NOT NULL,
  `PURCHASE_DATE` DATETIME NOT NULL,
  `RETURN_DATE` DATETIME NOT NULL,
  `CUSTOMER_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_returns_customers1_idx` (`CUSTOMER_id` ASC) ,
  CONSTRAINT `fk_returns_customers1`
    FOREIGN KEY (`CUSTOMER_id`)
    REFERENCES `mydb`.`CUSTOMERS` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`EMPLOYEES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`EMPLOYEES` ;

CREATE TABLE IF NOT EXISTS `mydb`.`EMPLOYEES` (
  `id` INT NOT NULL,
  `NAME` VARCHAR(45) NOT NULL,
  `SURNAME` VARCHAR(45) NOT NULL,
  `ROLE` VARCHAR(45) NOT NULL,
  `EMAIL` VARCHAR(45) NOT NULL,
  `PHONE_NUMBER` VARCHAR(45) NOT NULL,
  `SHOP_CENTER_NAME` VARCHAR(45) NOT NULL,
  `EXPERIENCE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SHOP_HAS_PURCHASES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`SHOP_HAS_PURCHASES` ;

CREATE TABLE IF NOT EXISTS `mydb`.`SHOP_HAS_PURCHASES` (
  `SHOP_id` INT NOT NULL,
  `PURCHASES_id` INT NOT NULL,
  PRIMARY KEY (`SHOP_id`, `PURCHASES_id`),
  INDEX `fk_shop_has_purchases_purchases1_idx` (`PURCHASES_id` ASC) ,
  INDEX `fk_shop_has_purchases_shop1_idx` (`SHOP_id` ASC) ,
  CONSTRAINT `fk_shop_has_purchases_shop1`
    FOREIGN KEY (`SHOP_id`)
    REFERENCES `mydb`.`SHOP` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_shop_has_purchases_purchases1`
    FOREIGN KEY (`PURCHASES_id`)
    REFERENCES `mydb`.`PURCHASES` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SHOP_HAS_INVENTARY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`SHOP_HAS_INVENTARY` ;

CREATE TABLE IF NOT EXISTS `mydb`.`SHOP_HAS_INVENTARY` (
  `SHOP_id` INT NOT NULL,
  `INVENTORY_id` INT NOT NULL,
  PRIMARY KEY (`SHOP_id`, `INVENTORY_id`),
  INDEX `fk_shop_has_inventory_inventory1_idx` (`INVENTORY_id` ASC) ,
  INDEX `fk_shop_has_inventory_shop1_idx` (`SHOP_id` ASC) ,
  CONSTRAINT `fk_shop_has_inventory_shop1`
    FOREIGN KEY (`SHOP_id`)
    REFERENCES `mydb`.`SHOP` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_shop_has_inventory_inventory1`
    FOREIGN KEY (`INVENTORY_id`)
    REFERENCES `mydb`.`INVENTORY` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SHOP_HAS_DELIVERIS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`SHOP_HAS_DELIVERIS` ;

CREATE TABLE IF NOT EXISTS `mydb`.`SHOP_HAS_DELIVERIS` (
  `SHOP_id` INT NOT NULL,
  `DELIVERIES_id` INT NOT NULL,
  PRIMARY KEY (`SHOP_id`, `DELIVERIES_id`),
  INDEX `fk_shop_has_deliveries_deliveries1_idx` (`DELIVERIES_id` ASC) ,
  INDEX `fk_shop_has_deliveries_shop1_idx` (`SHOP_id` ASC) ,
  CONSTRAINT `fk_shop_has_deliveries_shop1`
    FOREIGN KEY (`SHOP_id`)
    REFERENCES `mydb`.`SHOP` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_shop_has_deliveries_deliveries1`
    FOREIGN KEY (`DELIVERIES_id`)
    REFERENCES `mydb`.`DELIVERIES` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SHOP_HAS_EMPLOYESS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`SHOP_HAS_EMPLOYESS` ;

CREATE TABLE IF NOT EXISTS `mydb`.`SHOP_HAS_EMPLOYESS` (
  `SHOP_id` INT NOT NULL,
  `EMPLOYEES_id` INT NOT NULL,
  PRIMARY KEY (`SHOP_id`, `EMPLOYEES_id`),
  INDEX `fk_shop_has_employees_employees1_idx` (`EMPLOYEES_id` ASC) ,
  INDEX `fk_shop_has_employees_shop1_idx` (`SHOP_id` ASC) ,
  CONSTRAINT `fk_shop_has_employees_shop1`
    FOREIGN KEY (`SHOP_id`)
    REFERENCES `mydb`.`SHOP` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_shop_has_employees_employees1`
    FOREIGN KEY (`EMPLOYEES_id`)
    REFERENCES `mydb`.`EMPLOYEES` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SERVICE_CENTER_EMPLOYESS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`SERVICE_CENTER_EMPLOYESS` ;

CREATE TABLE IF NOT EXISTS `mydb`.`SERVICE_CENTER_EMPLOYESS` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL,
  `SURNAME` VARCHAR(45) NOT NULL,
  `ROLE` VARCHAR(45) NOT NULL,
  `EMAIL` VARCHAR(45) NOT NULL,
  `PHONE_NUMBER` VARCHAR(45) NOT NULL,
  `SERVICE_CENTER_NAME` VARCHAR(45) NOT NULL,
  `EXPERIENCE` VARCHAR(45) NOT NULL,
  `SERVICE_CENTER_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) ,
  INDEX `fk_cervice_center_employees_service_centers1_idx` (`SERVICE_CENTER_id` ASC) ,
  CONSTRAINT `fk_cervice_center_employees_service_centers1`
    FOREIGN KEY (`SERVICE_CENTER_id`)
    REFERENCES `mydb`.`SERVICE_CENTERS` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
